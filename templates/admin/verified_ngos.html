{% extends "base.html" %}

{% block title %}Admin | {{ page_title }}{% endblock %}

{% block content %}
<div class="admin-grid-layout">

    <div class="admin-sidebar">
        <div class="sidebar-list-group">
            <a href="{{ url_for('admin.list_pending_ngos') }}"
               class="sidebar-item">
                <i class="fas fa-clock"></i> Pending Applications
            </a>
            <a href="{{ url_for('admin.list_verified_ngos') }}"
               class="sidebar-item active">
                <i class="fas fa-check-circle"></i> Verified NGOs (<span class="badge-count">{{ ngos|length }}</span>)
            </a>
            <a href="{{ url_for('admin.list_rejected_ngos') }}" class="sidebar-item">
                <i class="fas fa-times-circle"></i> Rejected Applications
            </a>
            <a href="{{ url_for('admin.logout') }}" class="sidebar-item item-danger">
                <i class="fas fa-sign-out-alt"></i> Logout
            </a>
        </div>
    </div>

    <div class="admin-main-content">
        <h2 class="section-title-admin">{{ page_title }}</h2>

        {% if ngos %}
            <table class="data-table-custom">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Name</th>
                        <th>Type</th>
                        <th>Email</th>
                        <th>Approved</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    {% for ngo in ngos %}
                    <tr>
                        <td>{{ ngo.id }}</td>
                        <td>{{ ngo.name }}</td>
                        <td>{{ ngo.ngo_type }}</td>
                        <td>{{ ngo.contact_email }}</td>
                        <td>{{ ngo.date_approved.strftime('%Y-%m-%d') }}</td>
                        <td>
                            <a href="{{ url_for('admin.manage_verified_ngo', ngo_id=ngo.id) }}" class="btn-action btn-manage">Manage</a>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        {% else %}
            <div class="custom-alert-warning custom-alert-centered">
                No organizations have been verified yet.
            </div>
        {% endif %}
    </div>
</div>

<style>
/* CSS ADDITIONS FOR THIS VIEW */
.btn-manage {
    background-color: var(--color-accent-teal); /* Teal for Info/Manage */
    color: white;
    font-weight: 600;
}
.btn-manage:hover {
    background-color: #008C78;
    transform: translateY(-1px);
}
.custom-alert-centered {
    padding: 20px;
    margin-top: 30px;
    background: rgba(255, 230, 0, 0.1); /* Soft warning background */
    border: 1px solid #FFD700;
    color: var(--color-text-dark);
    border-radius: 8px;
    text-align: center;
    font-weight: 500;
}
/* Ensure badge-count style is present for the sidebar (using green) */
.badge-count {
    margin-left: auto;
    background-color: var(--color-accent-green);
    color: white;
    padding: 4px 8px;
    border-radius: 10px;
    font-size: 0.8rem;
    font-weight: 700;
}
</style>
{% endblock %}